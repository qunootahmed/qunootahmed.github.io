/*! For license information please see route-widget-shopify-stable-v2.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["route-widget-shopify"]=t():e["route-widget-shopify"]=t()}(self,(()=>(()=>{var e={959:(e,t,r)=>{e.exports=r(705)},70:(e,t,r)=>{"use strict";var n=r(802),o=r(296),i=r(662),a=r(388),u=r(909),c=r(270),s=r(348),l=r(89),p=r(258),d=r(102);e.exports=function(e){return new Promise((function(t,r){var f,h=e.data,m=e.headers,v=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}n.isFormData(h)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+w)}var _=u(e.baseURL,e.url);function x(){if(y){var n="getAllResponseHeaders"in y?c(y.getAllResponseHeaders()):null,i={data:v&&"text"!==v&&"json"!==v?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:e,request:y};o((function(e){t(e),g()}),(function(e){r(e),g()}),i),y=null}}if(y.open(e.method.toUpperCase(),a(_,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=x:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(x)},y.onabort=function(){y&&(r(l("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){r(l("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||p;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(l(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},n.isStandardBrowserEnv()){var k=(e.withCredentials||s(_))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;k&&(m[e.xsrfHeaderName]=k)}"setRequestHeader"in y&&n.forEach(m,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),v&&"json"!==v&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){y&&(r(!e||e&&e.type?new d("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),h||(h=null),y.send(h)}))}},705:(e,t,r)=>{"use strict";var n=r(802),o=r(686),i=r(281),a=r(977),u=function e(t){var r=new i(t),u=o(i.prototype.request,r);return n.extend(u,i.prototype,r),n.extend(u,r),u.create=function(r){return e(a(t,r))},u}(r(714));u.Axios=i,u.Cancel=r(102),u.CancelToken=r(309),u.isCancel=r(690),u.VERSION=r(907).version,u.all=function(e){return Promise.all(e)},u.spread=r(126),u.isAxiosError=r(305),e.exports=u,e.exports.default=u},102:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},309:(e,t,r)=>{"use strict";var n=r(102);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},690:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},281:(e,t,r)=>{"use strict";var n=r(802),o=r(388),i=r(881),a=r(112),u=r(977),c=r(83),s=c.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=u(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&c.assertOptions(r,{silentJSONParsing:s.transitional(s.boolean),forcedJSONParsing:s.transitional(s.boolean),clarifyTimeoutError:s.transitional(s.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var i,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!o){var p=[a,void 0];for(Array.prototype.unshift.apply(p,n),p=p.concat(l),i=Promise.resolve(t);p.length;)i=i.then(p.shift(),p.shift());return i}for(var d=t;n.length;){var f=n.shift(),h=n.shift();try{d=f(d)}catch(e){h(e);break}}try{i=a(d)}catch(e){return Promise.reject(e)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},l.prototype.getUri=function(e){return e=u(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,r){return this.request(u(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,r,n){return this.request(u(n||{},{method:e,url:t,data:r}))}})),e.exports=l},881:(e,t,r)=>{"use strict";var n=r(802);function o(){this.handlers=[]}o.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},909:(e,t,r)=>{"use strict";var n=r(387),o=r(310);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},89:(e,t,r)=>{"use strict";var n=r(871);e.exports=function(e,t,r,o,i){var a=new Error(e);return n(a,t,r,o,i)}},112:(e,t,r)=>{"use strict";var n=r(802),o=r(727),i=r(690),a=r(714),u=r(102);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new u("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},871:e=>{"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},977:(e,t,r)=>{"use strict";var n=r(802);e.exports=function(e,t){t=t||{};var r={};function o(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function i(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(void 0,e[r]):o(e[r],t[r])}function a(e){if(!n.isUndefined(t[e]))return o(void 0,t[e])}function u(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(void 0,e[r]):o(void 0,t[r])}function c(r){return r in t?o(e[r],t[r]):r in e?o(void 0,e[r]):void 0}var s={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:c};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=s[e]||i,o=t(e);n.isUndefined(o)&&t!==c||(r[e]=o)})),r}},296:(e,t,r)=>{"use strict";var n=r(89);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},727:(e,t,r)=>{"use strict";var n=r(802),o=r(714);e.exports=function(e,t,r){var i=this||o;return n.forEach(r,(function(r){e=r.call(i,e,t)})),e}},714:(e,t,r)=>{"use strict";var n=r(802),o=r(16),i=r(871),a=r(258),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,l={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=r(70)),s),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,r=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,a=!r&&"json"===this.responseType;if(a||o&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){l.headers[e]=n.merge(u)})),e.exports=l},258:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},907:e=>{e.exports={version:"0.26.1"}},686:e=>{"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},388:(e,t,r)=>{"use strict";var n=r(802);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},310:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},662:(e,t,r)=>{"use strict";var n=r(802);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,a){var u=[];u.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),n.isString(o)&&u.push("path="+o),n.isString(i)&&u.push("domain="+i),!0===a&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},387:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},305:(e,t,r)=>{"use strict";var n=r(802);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},348:(e,t,r)=>{"use strict";var n=r(802);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},16:(e,t,r)=>{"use strict";var n=r(802);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},270:(e,t,r)=>{"use strict";var n=r(802),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},126:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},83:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(907).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return n(r)===e||"a"+(t<1?"n ":" ")+e}}));var a={};i.transitional=function(e,t,r){function n(e,t){return"[Axios v"+o+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,o,i){if(!1===e)throw new Error(n(o," has been removed"+(t?" in "+t:"")));return t&&!a[o]&&(a[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}},e.exports={assertOptions:function(e,t,r){if("object"!==n(e))throw new TypeError("options must be an object");for(var o=Object.keys(e),i=o.length;i-- >0;){var a=o[i],u=t[a];if(u){var c=e[a],s=void 0===c||u(c,a,e);if(!0!==s)throw new TypeError("option "+a+" must be "+s)}else if(!0!==r)throw Error("Unknown option "+a)}},validators:i}},802:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(686),i=Object.prototype.toString;function a(e){return Array.isArray(e)}function u(e){return void 0===e}function c(e){return"[object ArrayBuffer]"===i.call(e)}function s(e){return null!==e&&"object"===n(e)}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function p(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!==n(e)&&(e=[e]),a(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:c,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&c(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:l,isUndefined:u,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:p,isStream:function(e){return s(e)&&p(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function r(r,n){l(t[n])&&l(r)?t[n]=e(t[n],r):l(r)?t[n]=e({},r):a(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)d(arguments[n],r);return t},extend:function(e,t,r){return d(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},532:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var u=0;u<this.length;u++){var c=this[u][0];null!=c&&(a[c]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},892:e=>{"use strict";e.exports=function(e){var t=e[1],r=e[3];if(!r)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),i="/*# ".concat(o," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},948:(e,t,r)=>{"use strict";var n=r(643);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,a){if(a!==n){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},762:(e,t,r)=>{e.exports=r(948)()},643:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},592:e=>{e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},588:e=>{e.exports={baseImageURL:"https://cdn.routeapp.io/route-widget/images",apiURL:"https://api.route.com",headlessApiURL:"https://shopify.route.com",shopifyServiceURL:"https://shopify.route.com",protectCoreURL:"https://protection-widget.route.com/protect.core.js"}},263:()=>{var e=e||{};e.analytics={init:function(){var t=this;window.setTimeout((function(){t.settings.disableGA||e.analytics.render()}),1e3)},render:function(){if(!document.getElementById("js-routeapp-analytics-frame")){var e=document.createElement("iframe");e.id="js-routeapp-analytics-frame",e.title="Route App Analytics",e.frameBorder=0,e.width=0,e.height=0,e.setAttribute("src",this.settings.url),e.style="width:0; height:0; border: 0; border: none; display: block !important",document.body.appendChild(e)}},send:function(e){var t=document.getElementById("js-routeapp-analytics-frame");t&&t.contentWindow.postMessage(e,this.settings.url)},settings:{disableGA:!1,url:"https://cdn.routeapp.io/route-analytics/index.html"}};var t=setInterval((function(){"complete"!==document.readyState&&"interactive"!==document.readyState||(e.analytics.init(),clearInterval(t))}),500);window.Routeapp=e},47:e=>{e.exports.c=function(e){return"function"==typeof window.olOnReadyStateChangeReplacement&&(e+="&internal"),e}},565:e=>{e.exports.B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"USD";return new Intl.NumberFormat(t,{style:"currency",currency:n,minimumFractionDigits:e?2:0,maximumFractionDigits:e?2:0}).format(r)},e.exports.u=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]},250:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(892),o=r.n(n),i=r(532),a=r.n(i)()(o());a.push([e.id,'.order-summary__sections.route-loading::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.75);z-index:999;background-image:url(https://cdn.routeapp.io/route-widget-shopify/v2/images/loading.gif);background-repeat:no-repeat;background-position:center center}',"",{version:3,sources:["webpack://./src/styles/extraStyling.scss"],names:[],mappings:"AAAA,8CAA8C,UAAU,CAAC,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,sCAAsC,CAAC,WAAW,CAAC,wFAAwF,CAAC,2BAA2B,CAAC,iCAAiC",sourcesContent:['.order-summary__sections.route-loading::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.75);z-index:999;background-image:url(https://cdn.routeapp.io/route-widget-shopify/v2/images/loading.gif);background-repeat:no-repeat;background-position:center center}'],sourceRoot:""}]);const u=a},370:(e,t,r)=>{var n=r(250);"string"==typeof n&&(n=[[e.id,n,""]]);r(27)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},27:(e,t,r)=>{var n,o,i={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),u=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=u.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),s=null,l=0,p=[],d=r(592);function f(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=i[n.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](n.parts[a]);for(;a<n.parts.length;a++)o.parts.push(b(n.parts[a],t))}else{var u=[];for(a=0;a<n.parts.length;a++)u.push(b(n.parts[a],t));i[n.id]={id:n.id,refs:1,parts:u}}}}function h(e,t){for(var r=[],n={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],u={css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(u):r.push(n[a]={id:a,parts:[u]})}return r}function m(e,t){var r=c(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=p[p.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),p.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=c(e.insertAt.before,r);r.insertBefore(t,o)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=r.nc;n&&(e.attrs.nonce=n)}return y(t,e.attrs),m(e,t),t}function y(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function b(e,t){var r,n,o,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=l++;r=s||(s=g(t)),n=x.bind(null,r,a,!1),o=x.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),m(e,t),t}(t),n=S.bind(null,r,t),o=function(){v(r),r.href&&URL.revokeObjectURL(r.href)}):(r=g(t),n=k.bind(null,r),o=function(){v(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=h(e,t);return f(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var a=r[o];(u=i[a.id]).refs--,n.push(u)}for(e&&f(h(e,t),t),o=0;o<n.length;o++){var u;if(0===(u=n[o]).refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete i[u.id]}}}};var w,_=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function x(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function k(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function S(e,t,r){var n=r.css,o=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(n=d(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([n],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}},223:(e,t,r)=>{var n=r(584).default;function o(){"use strict";e.exports=o=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},i=Object.prototype,a=i.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",p=c.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new L(n||[]);return u(i,"_invoke",{value:I(e,r,a)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var m="suspendedStart",v="suspendedYield",g="executing",y="completed",b={};function w(){}function _(){}function x(){}var k={};d(k,s,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(j([])));C&&C!==i&&a.call(C,s)&&(k=C);var R=x.prototype=w.prototype=Object.create(k);function A(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,u,c){var s=h(e[o],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==n(p)&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,u,c)}),(function(e){r("throw",e,u,c)})):t.resolve(p).then((function(e){l.value=e,u(l)}),(function(e){return r("throw",e,u,c)}))}c(s.arg)}var o;u(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}})}function I(e,r,n){var o=m;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=O(u,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?y:v,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return _.prototype=x,u(R,"constructor",{value:x,configurable:!0}),u(x,"constructor",{value:_,configurable:!0}),_.displayName=d(x,p,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,p,"GeneratorFunction")),e.prototype=Object.create(R),e},r.awrap=function(e){return{__await:e}},A(E.prototype),d(E.prototype,l,(function(){return this})),r.AsyncIterator=E,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(R),d(R,p,"Generator"),d(R,s,(function(){return this})),d(R,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},r}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},584:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},578:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(223)();e.exports=o;try{regeneratorRuntime=o}catch(e){"object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0;var n={};return(()=>{"use strict";function e(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)}))}}r.r(n);var o=r(578),i=r.n(o),a=(r(263),function(){return window.location.href.includes("#route-debug")}),u=function(){if(a()){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).log.apply(e,["[ROUTE-LOG]"].concat(r))}},c=function(){if(a()){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).error.apply(e,["[ROUTE-ERROR]"].concat(r))}};const s=function(){var e,r=3,n=1e3;function o(){return a.apply(this,arguments)}function a(){return a=t(i().mark((function e(){var t,a,s,l,p=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("InitializeWithRetry(retryCount=".concat(t=p.length>0&&void 0!==p[0]?p[0]:0,")")),e.prev=2,e.next=5,null===(a=window.Route)||void 0===a||null===(s=a.Protection)||void 0===s?void 0:s.getGrafanaFaroWebClientFactory();case 5:if(!(l=e.sent)){e.next=8;break}return e.abrupt("return",l);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),c("Faro initialization failed after ".concat(t+1," retries: ").concat(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 13:if(!(t<r-1)){e.next=17;break}return e.next=16,new Promise((function(e){return setTimeout(e,n)}));case 16:return e.abrupt("return",o(t+1));case 17:throw new Error("Faro initialization failed after multiple retries");case 18:case"end":return e.stop()}}),e,null,[[2,10]])}))),a.apply(this,arguments)}return{captureException:function(r){return t(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,c(r),void 0!==e){t.next=6;break}return t.next=5,o();case 5:e=t.sent;case 6:null===(n=e)||void 0===n||n.log(["Shopify Widget: Captured Exception"],{context:{error:null==r?void 0:r.message}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),c(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},captureExceptionWithBreadcrumb:function(r,n){return t(i().mark((function t(){var a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,c(r),void 0!==e){t.next=6;break}return t.next=5,o();case 5:e=t.sent;case 6:null===(a=e)||void 0===a||a.log(["Shopify Widget: Captured Exception with Breadcrumb"],{context:{error:null==r?void 0:r.message,breadcrumb:JSON.stringify(n)}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),c(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}}();var l,p,d,f,h,m,v,g,y,b,w={},_=[],x=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,k=Array.isArray;function S(e,t){for(var r in t)e[r]=t[r];return e}function C(e){var t=e.parentNode;t&&t.removeChild(e)}function R(e,t,r){var n,o,i,a={};for(i in t)"key"==i?n=t[i]:"ref"==i?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?l.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return A(e,a,n,o,null)}function A(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++d:o,__i:-1,__u:0};return null==o&&null!=p.vnode&&p.vnode(i),i}function E(e){return e.children}function I(e,t){this.props=e,this.context=t}function O(e,t){if(null==t)return e.__?O(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?O(e):null}function T(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return T(e)}}function P(e){(!e.__d&&(e.__d=!0)&&f.push(e)&&!L.__r++||h!==p.debounceRendering)&&((h=p.debounceRendering)||m)(L)}function L(){var e,t,r,n,o,i,a,u;for(f.sort(v);e=f.shift();)e.__d&&(t=f.length,n=void 0,i=(o=(r=e).__v).__e,a=[],u=[],r.__P&&((n=S({},o)).__v=o.__v+1,p.vnode&&p.vnode(n),F(r.__P,n,o,r.__n,void 0!==r.__P.ownerSVGElement,32&o.__u?[i]:null,a,null==i?O(o):i,!!(32&o.__u),u),n.__v=o.__v,n.__.__k[n.__i]=n,q(a,n,u),n.__e!=i&&T(n)),f.length>t&&f.sort(v));L.__r=0}function j(e,t,r,n,o,i,a,u,c,s,l){var p,d,f,h,m,v=n&&n.__k||_,g=t.length;for(r.__d=c,N(r,t,v),c=r.__d,p=0;p<g;p++)null!=(f=r.__k[p])&&"boolean"!=typeof f&&"function"!=typeof f&&(d=-1===f.__i?w:v[f.__i]||w,f.__i=p,F(e,f,d,o,i,a,u,c,s,l),h=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&G(d.ref,null,f),l.push(f.ref,f.__c||h,f)),null==m&&null!=h&&(m=h),65536&f.__u||d.__k===f.__k?(c&&!c.isConnected&&(c=O(d)),c=D(f,c,e)):"function"==typeof f.type&&void 0!==f.__d?c=f.__d:h&&(c=h.nextSibling),f.__d=void 0,f.__u&=-196609);r.__d=c,r.__e=m}function N(e,t,r){var n,o,i,a,u,c=t.length,s=r.length,l=s,p=0;for(e.__k=[],n=0;n<c;n++)a=n+p,null!=(o=e.__k[n]=null==(o=t[n])||"boolean"==typeof o||"function"==typeof o?null:"string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?A(null,o,null,null,null):k(o)?A(E,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?A(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)?(o.__=e,o.__b=e.__b+1,u=B(o,r,a,l),o.__i=u,i=null,-1!==u&&(l--,(i=r[u])&&(i.__u|=131072)),null==i||null===i.__v?(-1==u&&p--,"function"!=typeof o.type&&(o.__u|=65536)):u!==a&&(u===a+1?p++:u>a?l>c-a?p+=u-a:p--:u<a?u==a-1&&(p=u-a):p=0,u!==n+p&&(o.__u|=65536))):(i=r[a])&&null==i.key&&i.__e&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=O(i)),V(i,i,!1),r[a]=null,l--);if(l)for(n=0;n<s;n++)null!=(i=r[n])&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=O(i)),V(i,i))}function D(e,t,r){var n,o;if("function"==typeof e.type){for(n=e.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=e,t=D(n[o],t,r));return t}e.__e!=t&&(r.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function B(e,t,r,n){var o=e.key,i=e.type,a=r-1,u=r+1,c=t[r];if(null===c||c&&o==c.key&&i===c.type&&!(131072&c.__u))return r;if(n>(null==c||131072&c.__u?0:1))for(;a>=0||u<t.length;){if(a>=0){if((c=t[a])&&!(131072&c.__u)&&o==c.key&&i===c.type)return a;a--}if(u<t.length){if((c=t[u])&&!(131072&c.__u)&&o==c.key&&i===c.type)return u;u++}}return-1}function U(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||x.test(t)?r:r+"px"}function M(e,t,r,n,o){var i;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||U(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||U(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=g,e.addEventListener(t,i?b:y,i)):e.removeEventListener(t,i?b:y,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,r))}}function W(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=g++;else if(t.t<r.u)return;return r(p.event?p.event(t):t)}}}function F(e,t,r,n,o,i,a,u,c,s){var l,d,f,h,m,v,g,y,b,w,_,x,C,R,A,O=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),i=[u=t.__e=r.__e]),(l=p.__b)&&l(t);e:if("function"==typeof O)try{if(y=t.props,b=(l=O.contextType)&&n[l.__c],w=l?b?b.props.value:l.__:n,r.__c?g=(d=t.__c=r.__c).__=d.__E:("prototype"in O&&O.prototype.render?t.__c=d=new O(y,w):(t.__c=d=new I(y,w),d.constructor=O,d.render=J),b&&b.sub(d),d.props=y,d.state||(d.state={}),d.context=w,d.__n=n,f=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=O.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=S({},d.__s)),S(d.__s,O.getDerivedStateFromProps(y,d.__s))),h=d.props,m=d.state,d.__v=t,f)null==O.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==O.getDerivedStateFromProps&&y!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,w),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,w)||t.__v===r.__v)){for(t.__v!==r.__v&&(d.props=y,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach((function(e){e&&(e.__=t)})),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,w),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,m,v)}))}if(d.context=w,d.props=y,d.__P=e,d.__e=!1,x=p.__r,C=0,"prototype"in O&&O.prototype.render){for(d.state=d.__s,d.__d=!1,x&&x(t),l=d.render(d.props,d.state,d.context),R=0;R<d._sb.length;R++)d.__h.push(d._sb[R]);d._sb=[]}else do{d.__d=!1,x&&x(t),l=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++C<25);d.state=d.__s,null!=d.getChildContext&&(n=S(S({},n),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(v=d.getSnapshotBeforeUpdate(h,m)),j(e,k(A=null!=l&&l.type===E&&null==l.key?l.props.children:l)?A:[A],t,r,n,o,i,a,u,c,s),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),g&&(d.__E=d.__=null)}catch(e){t.__v=null,c||null!=i?(t.__e=u,t.__u|=c?160:32,i[i.indexOf(u)]=null):(t.__e=r.__e,t.__k=r.__k),p.__e(e,t,r)}else null==i&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=H(r.__e,t,r,n,o,i,a,c,s);(l=p.diffed)&&l(t)}function q(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)G(r[n],r[++n],r[++n]);p.__c&&p.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){p.__e(e,t.__v)}}))}function H(e,t,r,n,o,i,a,u,c){var s,p,d,f,h,m,v,g=r.props,y=t.props,b=t.type;if("svg"===b&&(o=!0),null!=i)for(s=0;s<i.length;s++)if((h=i[s])&&"setAttribute"in h==!!b&&(b?h.localName===b:3===h.nodeType)){e=h,i[s]=null;break}if(null==e){if(null===b)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,y.is&&y),i=null,u=!1}if(null===b)g===y||u&&e.data===y||(e.data=y);else{if(i=i&&l.call(e.childNodes),g=r.props||w,!u&&null!=i)for(g={},s=0;s<e.attributes.length;s++)g[(h=e.attributes[s]).name]=h.value;for(s in g)h=g[s],"children"==s||("dangerouslySetInnerHTML"==s?d=h:"key"===s||s in y||M(e,s,null,h,o));for(s in y)h=y[s],"children"==s?f=h:"dangerouslySetInnerHTML"==s?p=h:"value"==s?m=h:"checked"==s?v=h:"key"===s||u&&"function"!=typeof h||g[s]===h||M(e,s,h,g[s],o);if(p)u||d&&(p.__html===d.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(d&&(e.innerHTML=""),j(e,k(f)?f:[f],t,r,n,o&&"foreignObject"!==b,i,a,i?i[0]:r.__k&&O(r,0),u,c),null!=i)for(s=i.length;s--;)null!=i[s]&&C(i[s]);u||(s="value",void 0!==m&&(m!==e[s]||"progress"===b&&!m||"option"===b&&m!==g[s])&&M(e,s,m,g[s],!1),s="checked",void 0!==v&&v!==e[s]&&M(e,s,v,g[s],!1))}return e}function G(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){p.__e(e,r)}}function V(e,t,r){var n,o;if(p.unmount&&p.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||G(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){p.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&V(n[o],t,r||"function"!=typeof e.type);r||null==e.__e||C(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function J(e,t,r){return this.constructor(e,r)}function X(e,t,r){var n,o,i,a;p.__&&p.__(e,t),o=(n="function"==typeof r)?null:r&&r.__k||t.__k,i=[],a=[],F(t,e=(!n&&r||t).__k=R(E,null,[e]),o||w,w,void 0!==t.ownerSVGElement,!n&&r?[r]:o?null:t.firstChild?l.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n,a),q(i,e,a)}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function $(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$(n.key),n)}}function ee(e,t,r){return t&&Z(e.prototype,t),r&&Z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function ne(e,t,r){return(t=$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}l=_.slice,p={__e:function(e,t,r,n){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,n||{}),a=o.__d),a)return o.__E=o}catch(t){e=t}throw e}},d=0,I.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=S({},this.state),"function"==typeof e&&(e=e(S({},r),this.props)),e&&S(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),P(this))},I.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),P(this))},I.prototype.render=E,f=[],m="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,v=function(e,t){return e.__v.__b-t.__v.__b},L.__r=0,g=0,y=W(!1),b=W(!0);var oe=r(762),ie=r.n(oe),ae=r(959),ue=r.n(ae),ce=r(588),se=function(){var e=t(i().mark((function e(t){var r,n,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>1&&void 0!==o[1]?o[1]:{},"function"!=typeof window.CustomEvent&&(window.CustomEvent=(void 0).CustomEvent),(n=new CustomEvent(t,{detail:r})).initEvent(t,!0,!0),document.dispatchEvent(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){return window.location.href.includes("checkouts")&&!window.location.href.includes("thank_you")&&!window.location.href.includes("account/login")},pe=function(){return le()&&window.location.href.includes("step=payment_method")};const de=JSON.parse('{"name":"@route/shopify-cart-widget-v2","version":"3.1.0","description":"Route widget wrapper for Shopify","main":"src/index.js","repository":"git@gitlab.com:route/b2b-core/ecommerce-integrations/shopify-widget-v1.2.git","browserslist":[">1%","last 4 versions","Firefox ESR","not ie < 9"],"scripts":{"start":"parcel src/index.html --out-dir dist-dev --open","build":"NODE_ENV=production webpack --mode=production","build-stage":"NODE_ENV=stage webpack --mode=production","deploy-images-dev":"aws s3 sync dist/images s3://route-cdn-test-bucket/route-widget/images --profile route-cdn --acl public-read","deploy-images-prod":"aws s3 sync dist/images s3://route-cdn/route-widget/images --profile route-prod --acl public-read","update-version":"./update-version.sh","deploy-dev":"./deploy-dev.sh","deploy-prod":"./deploy-prod.sh","dev":"webpack --mode=development --watch --output-path=dist-dev","lint":"eslint src/**/*.js","lint-fix":"eslint --fix src/**/*.js","test":"./run-cypress-local.sh run","test-open":"./run-cypress-local.sh open","unit-test":"jest","unit-test:watch":"jest --watch","unit-test:coverage":"jest --coverage","e2e-test":"./run-cypress-local.sh run","cy:run":"cypress run --browser chrome --headless --config defaultCommandTimeout=10000","cy:open":"cypress open"},"engines":{"node":">=20.11.0"},"author":"Route Protect Team","license":"ISC","dependencies":{"axios":"^0.26.0","node-sass":"^9.0.0","preact":"^10.1.1","prop-types":"^15.6.2"},"devDependencies":{"@babel/core":"^7.1.2","@babel/plugin-proposal-class-properties":"^7.1.0","@babel/plugin-transform-react-jsx":"^7.0.0","@babel/plugin-transform-runtime":"^7.1.0","@babel/preset-env":"7.9.6","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@semantic-release/gitlab":"^9.4.1","autoprefixer":"^9.2.1","babel-eslint":"^10.0.1","babel-loader":"^8.0.4","babel-preset-preact":"^1.1.0","chai":"^4.3.0","css-loader":"^6.10.0","cypress":"^9.5.1","cypress-iframe":"^1.0.1","enzyme":"^3.11.0","enzyme-adapter-preact-pure":"^3.0.0","eslint":"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-config-prettier":"^8.3.0","eslint-plugin-cypress":"^2.12.1","eslint-plugin-import":"^2.25.2","eslint-plugin-jest":"^21.27.2","eslint-plugin-prettier":"^4.0.0","eslint-plugin-react":"^7.26.1","file-loader":"^2.0.0","husky":"^4.3.8","jest":"^27.0.0","parcel-bundler":"^1.12.5","postcss-flexbugs-fixes":"^4.1.0","postcss-loader":"^3.0.0","prettier":"^2.4.1","sass":"^1.69.6","sass-loader":"^10.1.0","style-loader":"^0.23.1","webpack":"^5.68.0","webpack-cli":"^4.9.2"},"release":{"plugins":["@semantic-release/commit-analyzer","@semantic-release/release-notes-generator","@semantic-release/changelog","@semantic-release/npm","@semantic-release/git","@semantic-release/gitlab"]}}');var fe;function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve=function(){function e(){Q(this,e)}return ee(e,null,[{key:"init",value:(r=t(i().mark((function t(r,n,o,a,c,l,p,d,f,h){var m,v,g,y=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u("* Middleware - init"),null===(m=window)||void 0===m||null===(v=m.Routeapp)||void 0===v||null===(g=v.analytics)||void 0===g||g.send({action:"track_performance",event_category:"route-widget",event_label:"protect-core-load-start",value:Math.round(window.performance.now())}),t.next=4,e.fetchProtectCoreScript("".concat(ce.protectCoreURL,"?shop=").concat(c)).then((function(){var t,i,u;null===(t=window)||void 0===t||null===(i=t.Routeapp)||void 0===i||null===(u=i.analytics)||void 0===u||u.send({action:"track_performance",event_category:"route-widget",event_label:"protect-core-load-end",value:Math.round(window.performance.now())}),y.widget=window.Route,y.storeDomain=c,y.environment=e.convertEnvironment(l.toLowerCase()),y.merchantId=p,y.storeName=d,y.theming=e.buildTheming(f,h),e.loadListeners(r,n,o,a)})).catch((function(e){s.captureExceptionWithBreadcrumb(e,{message:"error during ShopifyWidgetMiddleware",level:"error"})}));case 4:case"end":return t.stop()}}),t)}))),function(e,t,n,o,i,a,u,c,s,l){return r.apply(this,arguments)})},{key:"buildTheming",value:function(t,r){return r=e.convertDeskopAlign(r),me(me({},t&&{mode:this.widget.Theme.Mode.DarkMode}),r&&{alignment:r})}},{key:"convertDeskopAlign",value:function(e){switch(e){case"left":return this.widget.Theme.Alignment.Left;case"center":return this.widget.Theme.Alignment.Center;case"right":return this.widget.Theme.Alignment.Right;default:return}}},{key:"config",value:function(t,r,n,o){try{u("* Middleware - config: \n",this.storeDomain,{subtotal:t,currency:r,status:n}),n=e.convertStatus(n),this.widget.Protection.render({storeDomain:this.storeDomain,subtotal:t,currency:r,environment:this.environment,status:n,merchantId:this.merchantId,storeName:this.storeName,theming:this.theming,app:{name:null==de?void 0:de.name,version:null==de?void 0:de.version,platformId:"shopify"}})}catch(e){s.captureExceptionWithBreadcrumb(e,{message:"error during ShopifyWidgetMiddleware config",level:"error"})}}},{key:"convertStatus",value:function(e){switch(e){case!0:return Route.Coverage.ActiveByDefault;case!1:return Route.Coverage.InactiveByDefault}}},{key:"convertEnvironment",value:function(e){return"production"===e?Route.Environment.Production:Route.Environment.Dev}},{key:"loadListeners",value:function(t,r,n,o){e.onLoad(o),e.onRendered(),e.onStatusChange(t),e.onGetQuote(r),e.onModalOpen()}},{key:"onLoad",value:function(e){var t=this;this.widget.Protection.on("load",(function(){var r,n;e(null===(r=t.widget.Protection)||void 0===r||null===(n=r.options)||void 0===n?void 0:n.cartRef);try{var o,i;null===(o=window)||void 0===o||null===(i=o.Routeapp)||void 0===i||i.analytics.send({action:"load",event_category:"route-widget",event_label:"widget",value:!0})}catch(e){s.captureExceptionWithBreadcrumb(e,{message:"error during ShopifyWidgetMiddleware onLoad",level:"error"})}u("* Event: Loaded!")}))}},{key:"onRendered",value:function(){var e=this;this.widget.Protection.on("rendered",(function(){try{se("route:render",{rendered:!0}),window.Routeapp.analytics.send({action:"render",event_category:"route-widget",event_label:"widget",value:!0}),window.Routeapp.analytics.send({action:"widget-location-v2",event_category:"route-widget",event_label:"{\n            name: ".concat(e.storeName,",\n            domain: ").concat(e.storeDomain,",\n            merchantId: ").concat(e.merchantId,",\n            location: ").concat(le()?"checkouts":"cart",",\n          }"),value:!0}),u("* Event: Rendered!")}catch(e){s.captureExceptionWithBreadcrumb(e,{message:"error during ShopifyWidgetMiddleware onRendered",level:"error"})}}))}},{key:"onStatusChange",value:function(e){this.widget.Protection.on("status_change",(function(t){window.Routeapp.analytics.send({action:t.to?"check":"uncheck",event_category:"route-widget",event_label:"checkbox",value:t.to}),e(t.to),u("* Event: Checked! - ",t.to)}))}},{key:"onGetQuote",value:function(e){this.widget.Protection.on("get_quote",(function(t){e(t.quote),u("* Event: Got quote! -",t.quote)}))}},{key:"onCreateQuote",value:function(e){this.widget.Protection.on("create_quote",(function(t){e(t.quote.id),u("* Event: Got create quote")}))}},{key:"onModalOpen",value:function(){this.widget.Protection.on("modal_open",(function(e){window.Routeapp.analytics.send({action:"click",event_category:"route-widget",event_label:"icon",value:e.to}),u("* Event: Modal triggered!")}))}},{key:"updateQuoteWithVariant",value:function(e){this.widget.Protection.forceUpdateQuote(e,!1)}},{key:"setRouteOff",value:function(){u("* Setting Route"),this.widget.Protection.hide()}},{key:"createQuote",value:function(e,t,r,n){u("* Middleware - createQuote "),this.widget.Protection.createQuote(e,t,r,n)}}]);var r}();fe=ve,ne(ve,"widget",void 0),ne(ve,"storeDomain",void 0),ne(ve,"environment",void 0),ne(ve,"merchantId",void 0),ne(ve,"storeName",void 0),ne(ve,"theming",void 0),ne(ve,"fetchProtectCoreScript",(function(e){return new Promise((function(t,r){var n;if(null!==(n=window.Route)&&void 0!==n&&n.Protection)return t();var o=document.createElement("script");o.setAttribute("src",e),o.setAttribute("data-route-widget","true"),o.addEventListener("load",t),o.addEventListener("error",(function(e){r(new Error("Failed to load ".concat(e.target.src)))})),fe.removeProtectCoreScripts(),document.body.appendChild(o)}))})),ne(ve,"removeProtectCoreScripts",(function(){for(var e=document.querySelectorAll("[data-route-widget]"),t=0;t<e.length;t++)e[t].remove()}));var ge=r(565);const ye={isSupported:function(e){try{var t="__some_random_key_to_test";return e().setItem(t,t),e().removeItem(t),!0}catch(e){return!1}},storageActionItem:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{return this.isSupported(e)?"setItem"===t?e()[t](r,n):e()[t](r):null}catch(e){return null}}};function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _e="route-merchant-info";function xe(){var e,t="";return window.Shopify&&void 0!==window.Shopify?t=window.Shopify.shop||(null===(e=window.Shopify.Checkout)||void 0===e?void 0:e.apiHost)||window.location.hostname:(t=document.location.origin.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/")[0],window.Routeapp.analytics.send({action:"error_reading_shopifyhook",event_category:"route-widget",event_label:"widget"})),t}function ke(){var e,t,r,n=null===(e=window.Shopify)||void 0===e||null===(t=e.Checkout)||void 0===t?void 0:t.token,o=null===(r=document.querySelector('meta[name="shopify-checkout-authorization-token"]'))||void 0===r?void 0:r.content;return"gid://shopify/Checkout/".concat(n,"?key=").concat(o)}function Se(){var e,t,r=xe(),n=le()?null===(e=window.Shopify)||void 0===e||null===(t=e.Checkout)||void 0===t?void 0:t.token:"",o={shop:r,checkoutToken:n,shopifyCheckoutAuthorizationToken:le()&&n?document.querySelector("[name=shopify-checkout-authorization-token]").getAttribute("content"):"","Content-type":"application/json;charset=UTF-8"};return le()&&Ie()?we(we({},o),{},{"X-Shopify-Domain":r,"X-Shopify-Checkout-Token":ke(),"X-Shopify-Storefront-Token":ye.storageActionItem((function(){return sessionStorage}),"getItem","route-storefront-token")}):o}var Ce=function(){var e=t(i().mark((function e(){var t,r,n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(n=ye.storageActionItem((function(){return localStorage}),"getItem",_e)&&JSON.parse(ye.storageActionItem((function(){return localStorage}),"getItem",_e)))&&null!=n&&null!==(t=n.merchantInfo)&&void 0!==t&&t.merchantId&&null!=n&&null!==(r=n.merchantInfo)&&void 0!==r&&r.storeName&&null!=n&&n.timestamp){e.next=4;break}return e.abrupt("return",null);case 4:if(o=n.merchantInfo,a=n.timestamp,!((new Date).getTime()-a>36e5)){e.next=10;break}return ye.storageActionItem((function(){return localStorage}),"removeItem",_e),e.abrupt("return",null);case 10:return e.abrupt("return",o);case 13:e.prev=13,e.t0=e.catch(0),s.captureExceptionWithBreadcrumb(e.t0,{message:"error during getMerchantInfoFromLocal",level:"error"}),console.error("error getting route merchant info from local: ",e.t0);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=t(i().mark((function e(t){var r,n,o,a,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=3,n=0;case 2:return e.prev=3,e.next=6,ue().get("".concat(ce.shopifyServiceURL,"/v1/merchant-info/").concat(t));case 6:if(o=e.sent,(a=o.data)&&null!=a&&a.merchantId&&null!=a&&a.storeName){e.next=10;break}return e.abrupt("return",null);case 10:return u={merchantId:a.merchantId,storeName:a.storeName},c=JSON.stringify({merchantInfo:u,timestamp:(new Date).getTime()}),ye.storageActionItem((function(){return localStorage}),"setItem",_e,c),e.abrupt("return",u);case 16:if(e.prev=16,e.t0=e.catch(3),++n!==r){e.next=23;break}return console.error("error getting merchant info from remote: ".concat(t)),window.Routeapp.analytics.send({action:"error_getting_merchant_info",event_category:"route-widget",event_label:"widget",value:JSON.stringify(e.t0)}),s.captureExceptionWithBreadcrumb(e.t0,{message:"error during getMerchantInfoFromRemote",level:"error"}),e.abrupt("break",25);case 23:e.next=2;break;case 25:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();function Ae(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=t(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce();case 2:if(e.t1=e.sent,e.t1){e.next=7;break}return e.next=6,Re(t);case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0=null;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return ye.storageActionItem((function(){return sessionStorage}),"getItem","route-storefront-token")}var Oe=new(function(){return ee((function e(t){var r=this;Q(this,e),this.interceptors=[],this.callbacks={},t.forEach((function(e){r.addInterceptor(e)}))}),[{key:"addInterceptor",value:function(e){this.interceptors.push(new e)}},{key:"intercept",value:function(){var e=this;this.interceptors.forEach((function(t){return t.intercept(e.callbacks)}))}},{key:"release",value:function(){this.interceptors.forEach((function(e){return e.release()}))}},{key:"on",value:function(e,t){this.callbacks[e]?this.callbacks[e].push(t):this.callbacks[e]=[t]}}])}())([function(){return ee((function e(){Q(this,e),this.interceptions={},this.requestBody}),[{key:"intercept",value:function(e){this.callbacks=e;var t=XMLHttpRequest.prototype,r=t.send,n=t.open,o=this;t.open=function(e,t){return e=e||"GET",o.interceptions={method:e,url:t},o.interceptOpen(),n.apply(this,arguments)},t.send=function(e){var t=this,n=this;o.requestBody=e,n.addEventListener("readystatechange",(function(){4===n.readyState&&(t.response?o.interceptSend(t.response,o.requestBody):"text"!==t.responseType&&""!==t.responseType||!t.responseText||o.interceptSend(t.responseText,o.requestBody))})),r.apply(n,arguments)}}},{key:"interceptOpen",value:function(){}},{key:"interceptSend",value:function(e,t){var r,n,o;null!==(r=this.interceptions.url)&&void 0!==r&&r.match(/cart.(change)/g)&&this.callbacks["http-cart-change"]?this.callbacks["http-cart-change"].forEach((function(e){return e()})):null!==(n=this.interceptions.url)&&void 0!==n&&n.match(/cart.(update)/g)&&this.callbacks["http-cart-update"]?this.callbacks["http-cart-update"].forEach((function(e){return e(t)})):null!==(o=this.interceptions.url)&&void 0!==o&&o.match(/cart.(add)/g)&&this.callbacks["http-cart-add"]&&this.callbacks["http-cart-add"].forEach((function(e){return e(t)}))}}])}(),function(){return ee((function e(){Q(this,e)}),[{key:"intercept",value:function(e){this.callbacks=e,this.interceptFetch()}},{key:"interceptFetch",value:function(){if(window.routeInterceptedFetch)return!1;var e=this,t=window.fetch;window.fetch=function(){var r=arguments,n=this;return new Promise((function(o,i){t.apply(n,r).then((function(t){"string"!=typeof r[0]&&o(t),r[0].match(/cart.(change)/g)&&e.callbacks["http-cart-change"]?e.callbacks["http-cart-change"].forEach((function(e){return e()})):r[0].match(/cart.(update)/g)&&e.callbacks["http-cart-update"]?e.callbacks["http-cart-update"].forEach((function(e){return e()})):r[0].match(/cart.(add)/g)&&e.callbacks["http-cart-add"]&&e.callbacks["http-cart-add"].forEach((function(e){return e()})),o(t)})).catch((function(e){i(e)}))}))},window.routeInterceptedFetch=!0}}])}()]),Te=r(47);function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Le=function(e){return!!e&&e.some((function(e){return e.selling_plan_id}))},je=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return t.requires_shipping&&"route"!==t.vendor.toLowerCase()&&t.product_title!==e}))};function Ne(){window.cachedCart=null}function De(e){return e&&e.headlessWidget?ce.headlessApiURL:document.location.origin}var Be=function(){var e=t(i().mark((function e(t){var r,n,o,a,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.cachedCart||t.ignoreCachedCart){e.next=3;break}return e.abrupt("return",window.cachedCart);case 3:return r=De(t),n=(new Date).getTime(),o="".concat(r,"/cart.js?timestamp=").concat(n),o=(0,Te.c)(o),a=Se(),e.next=10,ue().get(o,{headers:a});case 10:return p=void 0,d=void 0,(null==(i=u=e.sent)||null===(p=i.data)||void 0===p||null===(d=p.items)||void 0===d?void 0:d.length)>0&&(window.cachedCart=i,setTimeout(Ne,2500)),e.abrupt("return",u);case 15:e.prev=15,e.t0=e.catch(0),console.error("error when getting cart: ",e.t0),(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)>=401&&(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)<500||s.captureExceptionWithBreadcrumb(e.t0,{message:"error during getShopifyCart",level:"error"});case 19:return e.abrupt("return",{});case 20:case"end":return e.stop()}var i,p,d}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=t(i().mark((function e(t,r){var n,o,a,u,c,l,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=De(r),o=Se(),le()&&window.Routeapp.analytics.send({action:"checkout-updateShopifyCart()-initiated",event_category:"route-widget - update cart",event_label:"{\n          store: ".concat(n,",\n          checkout_token: ").concat(null===(a=window.Shopify)||void 0===a||null===(u=a.Checkout)||void 0===u?void 0:u.token,",\n        }"),value:!0}),e.next=6,ue().post("".concat(n,"/cart/update.js"),t,{headers:o});case 6:return c=e.sent,le()&&window.Routeapp.analytics.send({action:"checkout-updateShopifyCart()-completed",event_category:"route-widget - update cart",event_label:"{\n          store: ".concat(n,",\n          checkout_token: ").concat(null===(l=window.Shopify)||void 0===l||null===(p=l.Checkout)||void 0===p?void 0:p.token,",\n        }"),value:!0}),Ne(),e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(0),s.captureExceptionWithBreadcrumb(e.t0,{message:"error during updateShopifyCart",level:"error"});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}(),Me=function(){var e=t(i().mark((function e(t,r){var n,o,a,u,c,l,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=De(r),l=Se(),window.Routeapp.analytics.send({action:"headless-updateShopifyCart()-initiated",event_category:"route-widget - update cart",event_label:"{\n        store: ".concat(c,",\n        checkout_token: ").concat(null===(n=window.Shopify)||void 0===n||null===(o=n.Checkout)||void 0===o?void 0:o.token,",\n      }"),value:!0}),e.next=6,ue().post("".concat(c,"/cart/update.js"),t,{headers:l});case 6:return p=e.sent,window.Routeapp.analytics.send({action:"headless-updateShopifyCart()-completed",event_category:"route-widget - update cart",event_label:"{\n        store: ".concat(c,",\n        checkout_token: ").concat(null===(a=window.Shopify)||void 0===a||null===(u=a.Checkout)||void 0===u?void 0:u.token,",\n      }"),value:!0}),e.abrupt("return",p);case 11:e.prev=11,e.t0=e.catch(0),s.captureExceptionWithBreadcrumb(e.t0,{message:"error during updateShopifyCartHeadless",level:"error"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),We=function(){var e=t(i().mark((function e(r){var n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,o=setInterval(t(i().mark((function e(){var a,u,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){return(s=t(i().mark((function e(){var t,r,n,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ye.storageActionItem((function(){return sessionStorage}),"getItem","routeChecked")){e.next=2;break}return e.abrupt("return");case 2:return t="true"===ye.storageActionItem((function(){return sessionStorage}),"getItem","routeChecked"),e.next=5,a();case 5:if(r=e.sent,t!==r){e.next=14;break}return e.next=9,ue().get(document.location);case 9:n=e.sent,(u=document.createElement("div")).innerHTML=n.data,document.querySelector("#order-summary").innerHTML=u.querySelector("#order-summary").innerHTML,clearInterval(o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(){return s.apply(this,arguments)},u=function(){return u=t(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(r);case 2:t=e.sent,n=0;case 4:if(!(n<t.data.items.length)){e.next=10;break}if("Route"!==t.data.items[n].vendor){e.next=7;break}return e.abrupt("return",!0);case 7:n++,e.next=4;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)},a=function(){return u.apply(this,arguments)},n>10&&clearInterval(o),!pe()){e.next=8;break}return e.next=8,c();case 8:n++;case 9:case"end":return e.stop()}}),e)}))),500);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const Fe={getShopifyCart:Be,getCartSubtotal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var r=0;if(!e||null==e||!e.items)return r;var n=je(e.items,t);if(n)for(var o=0;o<n.length;o++){var i=n[o];r+=i.original_line_price?i.original_line_price:i.final_line_price}return r}catch(e){s.captureExceptionWithBreadcrumb(e,{message:"error during getCartSubtotal",level:"error"})}},updateShopifyCart:Ue,updateShopifyCartHeadless:Me,updateOrderSummaryPaymentPage:We};var qe=function(){return ee((function e(t){Q(this,e),this.config={maxRetries:(null==t?void 0:t.maxRetries)||3,retryDelayMs:(null==t?void 0:t.retryDelayMs)||1e3,backoffFactor:(null==t?void 0:t.backoffFactor)||2}}),[{key:"execute",value:(e=t(i().mark((function e(t){var r,n,o,a,u,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=this.config,o=n.maxRetries,a=n.retryDelayMs,u=n.backoffFactor,c=i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.t0=e.sent,e.abrupt("return",{v:e.t0});case 7:if(e.prev=7,e.t1=e.catch(0),!(++r>=o)){e.next=12;break}throw new Error("Function failed after ".concat(o," retries: ").concat(e.t1.message));case 12:return n=Math.pow(u,r-1)*a,e.next=15,new Promise((function(e){return setTimeout(e,n)}));case 15:case"end":return e.stop()}}),e,null,[[0,7]])}));case 3:if(!(r<=o)){e.next=10;break}return e.delegateYield(c(),"t0",5);case 5:if(!(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=3;break;case 10:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"getConfig",value:function(){return this.config}}]);var e}(),He=function(){var e=t(i().mark((function e(r){var n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={attributes:{route_toggle_state:r?1:0}},e.prev=1,o=new qe,e.next=5,o.execute(t(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.updateShopifyCart(n);case 2:case"end":return e.stop()}}),e)}))));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error setting route state on Shopify",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=t(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye.storageActionItem((function(){return localStorage}),"setItem","route-select-state",JSON.stringify({state:t?"1":"0",timestamp:(new Date).getTime()})),e.next=3,He(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=t(i().mark((function e(t,r,n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null,t?o=!1:(r||n)&&(o=!0),e.abrupt("return",Je(o));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=ye.storageActionItem((function(){return localStorage}),"getItem","route-select-state");return null===t?(null!==e&&Ge(e),e):(t=JSON.parse(t),(new Date).getTime()-t.timestamp>864e5?(ye.storageActionItem((function(){return localStorage}),"removeItem","route-select-state"),e):"1"===t.state)},Xe=function(){var e=t(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.items.some((function(e){return"route"===e.vendor.toLowerCase()&&e.price>0})),1!==t.items.length||!n){e.next=4;break}return ye.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!0),e.abrupt("return",r);case 4:if(!(r||null===r&&"checked"===ye.storageActionItem((function(){return sessionStorage}),"getItem","route-default-status"))||n||"false"!==ye.storageActionItem((function(){return sessionStorage}),"getItem","addingToCart")||"customer"!==ye.storageActionItem((function(){return sessionStorage}),"getItem","payment-responsible")){e.next=9;break}return e.next=8,Ge(!1);case 8:return e.abrupt("return",!1);case 9:return ye.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!1),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ke=function(e){var t=e.state.loadingSpinnerActive;if(e.props.headlessWidget&&!t){var r=document.querySelector(".order-summary__sections");r&&r.classList.add("route-loading"),e.setState({loadingSpinnerActive:!0})}},ze=function(e){var t=document.querySelector(".order-summary__sections");t&&t.classList.remove("route-loading"),e.setState({loadingSpinnerActive:!1})},Qe=function(){var e=t(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={attributes:{__quote_id:t}},e.prev=1,e.next=4,Fe.updateShopifyCart(n,r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Error setting quote id");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,r){return e.apply(this,arguments)}}(),Ye=function(){var e=t(i().mark((function e(t){var r,n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.getShopifyCart(t);case 3:if(r=e.sent,n=r.data,o=n.token,a=ye.storageActionItem((function(){return localStorage}),"getItem","cart-ref"),o===a){e.next=11;break}return ye.storageActionItem((function(){return localStorage}),"setItem","cart-ref",o),e.next=11,Qe("initialized",t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error init quote id",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=t(i().mark((function e(t,r){var n,o,a,u,c,s,l,p,d,f,h,m,v,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r.includes(",")?(p=r.split(","),d=z(p,6),o=d[0],a=d[1],u=d[2],c=d[3],s=d[4],l=d[5],u=u||"",c=c||"",s=s||"",l=l||""):o=a=r,"/cart"!==window.location.pathname){e.next=5;break}return e.next=5,Ze(t,"".concat(o,",").concat(u));case 5:return f=null!==(n=c)&&void 0!==n&&n.includes("http")?c:"".concat(et,"/").concat(c),e.next=8,nt(f);case 8:if(h=e.sent,rt(o,a,h,l),!u){e.next=18;break}if(m=h,!s){e.next=17;break}return g=null!==(v=s)&&void 0!==v&&v.includes("http")?s:"".concat(et,"/").concat(s),e.next=16,nt(g);case 16:m=e.sent;case 17:rt(u,u,m,l);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}(),Ze=function(){var e=t(i().mark((function e(t,r){var n,o,a,u,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=t||r).includes(",")&&(a=n.split(","),u=z(a,2),n=u[0],o=u[1]),c="".concat(et,"/cart"),e.next=6,nt(c);case 6:s=e.sent,rt(n,n,s),o&&rt(o,o,s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),et=document.location.origin,tt=function(e,t){return e.querySelector(t)},rt=function(e,t,r,n){var o=tt(document,e),i="body"===t?r:tt(r,t);i.innerHTML=i.innerHTML.replace(n,""),o.innerHTML=i.innerHTML},nt=function(){var e=t(i().mark((function e(t){var r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue().get(t);case 2:return r=e.sent,n=r.data,(o=document.createElement("div")).innerHTML=n,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=document.location.origin,it="route-routeins",at="cart-currency",ut=function(){var e=t(i().mark((function e(){var t,r,n,o,a,u,c,l,p,d,f,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(d=ye.storageActionItem((function(){return localStorage}),"getItem",it)&&JSON.parse(ye.storageActionItem((function(){return localStorage}),"getItem",it)))&&null!=d&&d.variants&&null!=d&&d.timestamp){e.next=4;break}return e.abrupt("return",null);case 4:if(!le()||"USD"===(null===(t=window)||void 0===t||null===(r=t.Shopify)||void 0===r||null===(n=r.Checkout)||void 0===n?void 0:n.currency)&&(null===(o=window)||void 0===o||null===(a=o.Shopify)||void 0===a||null===(u=a.Checkout)||void 0===u?void 0:u.currency)===ye.storageActionItem((function(){return localStorage}),"getItem",at)){e.next=6;break}return e.abrupt("return",null);case 6:if(le()||(null===(c=window)||void 0===c||null===(l=c.Shopify)||void 0===l||null===(p=l.currency)||void 0===p?void 0:p.active)===ye.storageActionItem((function(){return localStorage}),"getItem",at)){e.next=8;break}return e.abrupt("return",null);case 8:if(f=d.variants,h=d.timestamp,!((new Date).getTime()-h>36e5)){e.next=14;break}return ye.storageActionItem((function(){return localStorage}),"removeItem",it),e.abrupt("return",null);case 14:return e.abrupt("return",f);case 17:e.prev=17,e.t0=e.catch(0),console.error("error getting route variants from local: ",e.t0),s.captureExceptionWithBreadcrumb(e.t0,{message:"error during getRouteVariantsFromLocal",level:"error"});case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=t(i().mark((function e(){var t,r,n,o,a,u,c,l,p,d,f,h,m,v,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue().get("".concat(ot,"/products/routeins.js"));case 3:if((p=e.sent)&&null!=p&&null!==(t=p.data)&&void 0!==t&&t.variants){e.next=6;break}return e.abrupt("return",null);case 6:return d=null==p||null===(r=p.data)||void 0===r?void 0:r.variants,f=(new Date).getTime(),h=JSON.stringify({variants:d,timestamp:f}),m=le()?null===(n=window)||void 0===n||null===(o=n.Shopify)||void 0===o||null===(a=o.Checkout)||void 0===a?void 0:a.currency:null===(u=window)||void 0===u||null===(c=u.Shopify)||void 0===c||null===(l=c.currency)||void 0===l?void 0:l.active,ye.storageActionItem((function(){return localStorage}),"setItem",at,m),ye.storageActionItem((function(){return localStorage}),"setItem",it,h),e.abrupt("return",d);case 15:e.prev=15,e.t0=e.catch(0),console.error("error when getting route variants from remote: ",e.t0),(null===e.t0||void 0===e.t0||null===(v=e.t0.response)||void 0===v?void 0:v.status)>=401&&(null===e.t0||void 0===e.t0||null===(g=e.t0.response)||void 0===g?void 0:g.status)<500||s.captureExceptionWithBreadcrumb(e.t0,{message:"error during getRouteVariantsFromRemote",level:"error"});case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),st=function(){var e=t(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut();case 2:if(e.t1=e.sent,e.t1){e.next=7;break}return e.next=6,ct();case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0=null;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function lt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ht(e,t,r){return t=te(t),function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mt()?Reflect.construct(t,r||[],te(e).constructor):t.apply(e,r))}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}var vt=document.location.origin,gt=function(e){function r(){var e;Q(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return ne(e=ht(this,r,[].concat(o)),"state",{errored:!1,storeName:"",storeDomain:"",merchantId:"",currency:"USD",updatedVariantId:"",quoteAmount:"0.98",subtotalAmount:0,routeInCart:!1,routeIsChecked:!!e.props.defaultChecked,retryShippingMethods:5,fixingCart:!1,loadingSpinnerActive:!1,cartFixEvent:[],cartIdAttributeSet:!1}),ne(e,"isRouteVariantUpdate",function(){var e=t(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.parse(t),e.next=4,st();case 4:return n=e.sent,e.abrupt("return",n.some((function(e){return 1==r.updates[e.id]||0==r.updates[e.id]})));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),ne(e,"onToggle",function(){var r=t(i().mark((function t(r){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ye.storageActionItem((function(){return sessionStorage}),"removeItem","route-added-once"),t.next=3,Ge(r);case 3:if(Ke(e),e.props.headlessWidget&&(n=!!r,ye.storageActionItem((function(){return sessionStorage}),"setItem","routeChecked",n)),!r){t.next=11;break}return ye.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!0),t.next=9,e.setEnvironment();case 9:t.next=21;break;case 11:return t.next=13,e.removeAllRouteItemsFromCart();case 13:if(!e.props.reloadWithoutRefresh){t.next=18;break}return t.next=16,e.updateCartWithoutRefresh(e.props.reloadWithoutRefresh);case 16:t.next=21;break;case 18:if(!e.props.reloadWithoutRefreshV2){t.next=21;break}return t.next=21,$e(e.props.reloadWithoutRefreshCartPage,e.props.reloadWithoutRefreshV2);case 21:se("route:toggle",{toggled:r});case 22:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),ne(e,"onGetQuote",function(){var r=t(i().mark((function t(r){var n,o,a,u,c,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ye.storageActionItem((function(){return sessionStorage}),"setItem","route-default-status",r.paymentResponsible.toggleState),t.next=3,st();case 3:return n=t.sent,t.next=6,e.getRouteVariantNew(r.premium.amount,n);case 6:if(o=t.sent,a=o.price/100,ve.updateQuoteWithVariant(a),!e.state.fixingCart){t.next=15;break}return e.setState({fixingCart:!1}),t.next=13,e.fixCart(o);case 13:return e.props.fixingCheckoutCart&&(e.props.checkoutCartFixed=!0,e.props.slideoutCheckerForceRedirect?window.location.href=e.props.slideoutCheckerForceRedirect:(u=e.state.cartFixEvent).submitter?u.submitter.click():u.target.click()),t.abrupt("return");case 15:if(ye.storageActionItem((function(){return sessionStorage}),"setItem","payment-responsible",r.paymentResponsible.type),"customer"!==r.paymentResponsible.type){t.next=28;break}return t.next=19,Ve(e.props.forceOptIn,e.props.forceOptOut,e.props.defaultChecked);case 19:if(!(null===(c=t.sent)&&"checked"===r.paymentResponsible.toggleState||c)){t.next=24;break}e.updateCart(o),t.next=26;break;case 24:return t.next=26,e.removeAllRouteItemsFromCart();case 26:t.next=42;break;case 28:return t.next=30,e.removeAllRouteItemsFromCart();case 30:if(s=t.sent,!e.props.reloadWithoutRefresh){t.next=36;break}return t.next=34,e.updateCartWithoutRefresh(e.props.reloadWithoutRefresh);case 34:t.next=42;break;case 36:if(!e.props.reloadWithoutRefreshV2){t.next=41;break}return t.next=39,$e(e.props.reloadWithoutRefreshCartPage,e.props.reloadWithoutRefreshV2);case 39:t.next=42;break;case 41:"merchant"===r.paymentResponsible.type&&e.props.hideRouteProductFromCart&&!window.location.href.includes("/cart")&&e.hideRouteFromCart(e.props.hideRouteProductFromCart,s,r.premium.currency);case 42:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),ne(e,"onCreateQuote",function(){var r=t(i().mark((function t(r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.headlessWidget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Qe(r,e.props);case 4:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),ne(e,"onLoad",function(){var r=t(i().mark((function t(r){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={attributes:{__route_cart_id:r}},!r||"string"!=typeof r||e.state.cartIdAttributeSet){t.next=5;break}return e.setState({cartIdAttributeSet:!0}),t.next=5,Fe.updateShopifyCart(n,e.props);case 5:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),ne(e,"updateCart",function(){var r=t(i().mark((function t(r){var n,o,a,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=[],t.next=4,e.getShopifyCart();case 4:if(0!==(o=t.sent).data.items.length||!ye.storageActionItem((function(){return sessionStorage}),"getItem","addToCartTrigger")){t.next=15;break}case 6:if(0!==o.data.items.length){t.next=12;break}return t.next=9,e.getShopifyCart();case 9:o=t.sent,t.next=6;break;case 12:ye.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!1),t.next=16;break;case 15:ye.storageActionItem((function(){return sessionStorage}),"getItem","addToCartTrigger")&&ye.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!1);case 16:if(a=o.data,u=[],a.items.forEach((function(e,t){"Route"===e.vendor?(e.indexInCart=t,n.push(e)):u.push(e)})),0!==u.length||!1!==e.props.ignoreSubtotal){t.next=22;break}return e.removeAllRouteItemsFromCart(),t.abrupt("return");case 22:return e.props.permalinkButtonSelector&&e.permalinkButtonsCheck(r.id,u),e.setState({currency:a.currency,updatedVariantId:r.id,quoteAmount:r.price/100}),t.next=26,e.handleOrder(!0,a,n,r);case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(0),console.error("error updating route variant in cart: ",t.t0);case 31:case"end":return t.stop()}}),t,null,[[0,28]])})));return function(e){return r.apply(this,arguments)}}()),ne(e,"fixCart",function(){var r=t(i().mark((function t(r){var n,o,a,u,c,s,l,p,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getShopifyCart();case 2:for(n=t.sent,o=n.data,a=o.items,u=!1,c=[],s=0;s<a.length;s++)"Route"===a[s].vendor&&(l=a[s],c.push(l.id),c.length>1&&(u=!0),l.quantity>1&&(u=!0),l.id!==r.id&&(u=!0));if(!u){t.next=17;break}for(p={updates:ne({},r.id,1)},d=0;d<c.length;d++)c[d]!==r.id&&(p.updates[c[d]]=0);return e.props.cartStatus="verified",t.next=14,e.postUpdateCart(p);case 14:e.props.cartStatus="unverified",t.next=18;break;case 17:ze(e);case 18:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),ne(e,"getRouteVariantNew",(function(e,t){var r;if(e<=Number(t[0].price/100))r=t[0];else if(e>=Number(t[t.length-1].price/100))r=t[t.length-1];else for(var n=Number(t[0].price/100),o=0;e>n;)o+=1,r=t[parseInt(o)],n=Number(t[parseInt(o)].price/100);return r})),ne(e,"setEnvironment",t(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.nameToListen,e.props.forceCheckbox&&e.addListener(),r&&e.listenForName(r),e.getCart(),e.watchForChanges();case 5:case"end":return t.stop()}}),t)})))),ne(e,"CustomEvent",(function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r})),ne(e,"setGlobalVariables",t(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:window.RouteWidget={check:function(){var t=e.state.routeIsChecked;t||window.RouteWidget.toggle(!t)},uncheck:function(){var t=e.state.routeIsChecked;!0===t&&window.RouteWidget.toggle(!!t)},toggle:function(t){e.setState({routeIsChecked:t})},reload:function(){e.setEnvironment()},getQuoteAmount:function(){return parseFloat(e.state.quoteAmount)},hasRouteInCart:function(){var e=t(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(new Date).getTime(),e.next=4,ue().get("".concat(vt,"/cart.js?timestamp=").concat(t));case 4:return r=e.sent,n=r.data,e.abrupt("return",n.items&&n.items.some((function(e){return"route"===e.vendor.toLowerCase()&&e.price>0})));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),routeIsChecked:function(){return e.state.routeIsChecked}};case 1:case"end":return r.stop()}}),r)})))),ne(e,"addListener",(function(){for(var t,r,n,o=function(){var t=document.getElementsByClassName("route-div")[0];t.querySelector("[data-toggle]")&&"true"===document.querySelector(".route-div [data-toggle]").dataset.toggle&&(e.setState({routeIsChecked:!1}),t.querySelector("[data-toggle]").click())},i=document.getElementsByClassName("line-item med_u-container med_u-block med_u-row d-table-row"),a=0;a<i.length;a++)i[a].innerText.includes("Route Shipping")&&(n=a,r=document.getElementsByClassName(i[a].children[2].children[0].children[2].children[0].className),t=document.getElementsByClassName(i[a].lastElementChild.className),r[parseInt(n)].addEventListener("click",o),t[parseInt(n)].addEventListener("click",o))})),ne(e,"listenForName",(function(t){var r,n,o=function t(){if("className"===n)for(var o=0;o<r.length;o++)r[o].removeEventListener("click",t);else r.removeEventListener("click",t);ye.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!0),e.setEnvironment()};if(r=document.getElementsByClassName(t)){n="className";for(var i=0;i<r.length;i++)r[i].addEventListener("click",o)}else n="id",(r=document.getElementById(t)).addEventListener("click",o)})),ne(e,"getShopifyCart",t(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fe.getShopifyCart(e.props);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),ne(e,"reloadWidget",t(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.prev=1,t.next=4,st();case 4:r=t.sent,t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",console.error("ERROR getting Route Variants: ",t.t0));case 10:return t.next=12,e.getCart(r,!1);case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))),ne(e,"getCurrency",(function(e){var t="";if(le()){var r,n,o=null===(r=window.Shopify)||void 0===r||null===(n=r.Checkout)||void 0===n?void 0:n.currency;o&&(t=o.toUpperCase())}else e&&ge.u.includes(e.toUpperCase())&&(t=e.toUpperCase());return t})),ne(e,"createQuote",(function(t){var r=e.props.headlessWidget?Shopify.Checkout?Shopify.Checkout.token:"":t.token,n=function(e,t,r){try{return je(e,r).filter((function(e){return 0!==e.quantity})).map((function(e){var t=e.original_line_price?e.original_line_price:e.final_line_price;return{id:e.id.toString(),unit_price:(t/100).toFixed(2),quantity:e.quantity}}))}catch(e){s.captureExceptionWithBreadcrumb(e,{message:"error during getCartItemsArray",level:"error"})}}(t.items,e.props.headlessWidget,e.props.itemToExclude),o=e.getCurrency(null==t?void 0:t.currency),i=Fe.getCartSubtotal(t,e.props.itemToExclude)/100;ve.createQuote(r,n,i,o)})),ne(e,"getCart",t(i().mark((function t(){var r,n,o,a,u,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getShopifyCart();case 3:if(0!==(r=t.sent).data.items.length||!ye.storageActionItem((function(){return sessionStorage}),"getItem","addToCartTrigger")){t.next=14;break}case 5:if(0!==r.data.items.length){t.next=11;break}return t.next=8,e.getShopifyCart();case 8:r=t.sent,t.next=5;break;case 11:ye.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!1),t.next=15;break;case 14:ye.storageActionItem((function(){return sessionStorage}),"getItem","addToCartTrigger")&&ye.storageActionItem((function(){return sessionStorage}),"setItem","addToCartTrigger",!1);case 15:return n=r.data,t.next=18,Ve(e.props.forceOptIn,e.props.forceOptOut,e.props.defaultChecked);case 18:return o=t.sent,t.next=21,Xe(n,o);case 21:if(o=t.sent,a=e.getCurrency(null==n?void 0:n.currency),0!=(u=Fe.getCartSubtotal(n,e.props.itemToExclude)/100)){t.next=28;break}return t.next=27,e.removeAllRouteItemsFromCart();case 27:return t.abrupt("return");case 28:c=n.token?n.token:window.Shopify&&window.Shopify.Checkout?window.Shopify.Checkout.cartToken:"",ve.config(u,a,o,c),e.createQuote(n),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(0),console.error("error updating route variant in cart: ",t.t0);case 36:case"end":return t.stop()}}),t,null,[[0,33]])})))),ne(e,"handleOrder",function(){var r=t(i().mark((function t(r,n,o,a){var u,c,s,l,p;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=e.getSubscriptionProducts(n,!1),c=e.getSubscriptionProducts(n,!0),s=r&&n.items.length>0||e.shouldUpdateRegularOrder(o,u,c,a)||!1!==e.props.ignoreSubtotal,l=ye.storageActionItem((function(){return sessionStorage}),"getItem","numberOfRoutesTurnedOn")?parseInt(ye.storageActionItem((function(){return sessionStorage}),"getItem","numberOfRoutesTurnedOn"),10):0,p=document.getElementsByClassName("route-div"),e.props.multipleWidgets&&!e.state.routeIsChecked&&e.props.forceOptOut&&l<p.length&&(s||e.setState({routeIsChecked:!0}),ye.storageActionItem((function(){return sessionStorage}),"setItem","numberOfRoutesTurnedOn",l+1)),!s){t.next=10;break}return ye.storageActionItem((function(){return sessionStorage}),"removeItem","addOnReload"),t.next=10,e.handleRegularOrder(o,a,n);case 10:case"end":return t.stop()}}),t)})));return function(e,t,n,o){return r.apply(this,arguments)}}()),ne(e,"shouldUpdateRegularOrder",(function(e,t,r,n){return e.length>1||e.length>0&&0===t.length&&r.length>0||1===e.length&&e[0].id!==n.id||1===e.length&&1!==e[0].quantity})),ne(e,"getSubscriptionProducts",(function(e,t){for(var r=[],n=0;n<e.items.length;n++)e.items[n].properties&&(t?"Route"===e.items[n].vendor:"Route"!==e.items[n].vendor)&&e.items[n].properties.hasOwnProperty("shipping_interval_frequency")&&r.push(e.items[n]);return r})),ne(e,"handleRegularOrder",function(){var r=t(i().mark((function t(r,n,o){var a,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>1||1===r.length&&(e.isSubscriptionProduct(r[0])||r[0].id!==n.id)||1===r.length&&1!==r[0].quantity)){t.next=7;break}return ye.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!0),t.next=5,e.updateRouteVariantInCart(r,n.id);case 5:t.next=16;break;case 7:if(0!==r.length||e.routeHasBeenRemovedManually()){t.next=15;break}return ye.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!0),t.next=11,e.addToCart(n.id,!0,!0,o);case 11:ye.storageActionItem((function(){return sessionStorage}),"setItem","route-added-once",!0),le()&&(null===(a=window.Shopify)||void 0===a||null===(u=a.Checkout)||void 0===u?void 0:u.token)&&ye.storageActionItem((function(){return sessionStorage}),"setItem","route-current-checkout",window.Shopify.Checkout.token),t.next=16;break;case 15:0===r.length&&e.routeHasBeenRemovedManually()?(e.onToggle(!1),e.reloadWidget(),ze(e)):e.props.reorderRefresh?location.reload():ze(e);case 16:case"end":return t.stop()}}),t)})));return function(e,t,n){return r.apply(this,arguments)}}()),ne(e,"routeHasBeenRemovedManually",(function(){var e,t,r=ye.storageActionItem((function(){return sessionStorage}),"getItem","route-added-once"),n=ye.storageActionItem((function(){return sessionStorage}),"getItem","route-current-checkout");return!!(le()&&r&&n&&null!==(e=window.Shopify)&&void 0!==e&&null!==(t=e.Checkout)&&void 0!==t&&t.token)&&r&&!(n!==window.Shopify.Checkout.token)})),ne(e,"isSubscriptionProduct",(function(e){return e.properties&&e.properties.hasOwnProperty("shipping_interval_frequency")})),ne(e,"addToCart",function(){var r=t(i().mark((function t(r,n){var o,a,u,c=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>3?c[3]:void 0,Ie()&&!Le(o.items)?(a=o.items).push({variant_id:r,quantity:1}):a={updates:ne({},r,1)},t.prev=3,e.setState({routeIsChecked:!0}),u=!0,(e.props.disableReorder||e.props.nameToListen||e.props.headlessWidget)&&(u=!1),t.next=9,e.postUpdateCart(a,r,u,o);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(3),ze(e),t.abrupt("return",console.error("ERROR adding to cart: ",t.t0));case 15:e.props.nameToListen&&ye.storageActionItem((function(){return sessionStorage}),"setItem","routeAdded",!0),"/cart"===window.location.pathname&&n&&e.props.refreshClickAdd&&location.reload(),le()&&!e.props.headlessWidget&&e.refreshCheckout(document.location,!0);case 18:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,t){return r.apply(this,arguments)}}()),ne(e,"removeAllRouteItemsFromCart",function(){var r=t(i().mark((function t(r){var n,o,a,u,c,s,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getShopifyCart();case 2:for(n=t.sent,o=n.data.items,a=!1,u=0,c={updates:{}},s=0;s<o.length;s++)"Route"===o[s].vendor&&(c.updates[o[s].variant_id]=0,u+=o[s].price,a=!0);if(!a){t.next=26;break}if(t.prev=9,!Ie()||Le(o)){t.next=16;break}return l=o.filter((function(e){if("Route"!==e.vendor)return e})),t.next=14,e.postUpdateCart(l);case 14:t.next=18;break;case 16:return t.next=18,e.postUpdateCart(c);case 18:return t.next=20,e.onChangeRouteProductVisibility(!1,void 0,r);case 20:t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(9),ze(e),t.abrupt("return",console.error("ERROR removing all Route items from cart: ",t.t0));case 26:return t.abrupt("return",u/100);case 27:case"end":return t.stop()}}),t,null,[[9,22]])})));return function(e){return r.apply(this,arguments)}}()),ne(e,"onChangeRouteProductVisibility",function(){var r=t(i().mark((function t(r,n,o){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o||e.setState({routeIsChecked:r}),n&&e.props.needsUpdate&&e.props.classNameRemove&&"/cart"!==window.location.pathname&&document.getElementsByClassName(e.props.classNameRemove)[n[0].indexInCart].click(),"/cart"!==window.location.pathname||e.props.reloadWithoutRefresh?e.props.reloadWithoutRefresh?e.updateCartWithoutRefresh(e.props.reloadWithoutRefresh):e.props.reloadWithoutRefreshV2&&$e(e.props.reloadWithoutRefreshCartPage,e.props.reloadWithoutRefreshV2):location.reload(),!le()||e.props.headlessWidget){t.next=6;break}return t.next=6,e.refreshCheckout(document.location,!0);case 6:case"end":return t.stop()}}),t)})));return function(e,t,n){return r.apply(this,arguments)}}()),ne(e,"updateCartWithoutRefresh",function(){var r=t(i().mark((function t(r){var n,o,a,u,c,s,l,p,d,f,h,m,v,g,y,b,w,_;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="",r.includes(",")?(c=r.split(","),s=z(c,4),n=s[0],o=s[1],a=s[2],u=s[3],o=o||"",a=a||""):n=r,l=u||"".concat(vt,"/cart").concat(a),t.next=6,ue().get(l);case 6:p=t.sent,d=p.data,(f=document.createElement("div")).innerHTML=d,m=(h=function(e,t){return e.getElementsByClassName(t)[0]})(f,n),(v=e.props.reloadWithoutRefreshCartPage||n).includes(",")&&(y=v.split(","),b=z(y,2),v=b[0],g=b[1]),"/cart"===window.location.pathname?(m=h(f,v),h(document,v).innerHTML=m.innerHTML,g&&(w=h(f,g),h(document,g).innerHTML=w.innerHTML)):(h(document,n).innerHTML=m.innerHTML,o&&(_=h(f,o),h(document,o).innerHTML=_.innerHTML)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return r.apply(this,arguments)}}()),ne(e,"hideRouteFromCart",function(){var e=t(i().mark((function e(t,r,n){var o,a,u,c,s,l,p,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.split(",").map((function(e){return e.trim()})),a=z(o,2),u=a[0],c=a[1],u&&c&&0!==r){e.next=3;break}return e.abrupt("return");case 3:if(s=/\d{1,3}(?:[.,]\d{3})*(?:[.,]\d{2})?/g,l=/[\d(\,|\.)]+[\,|\.]\d{2}$/g,p=document.getElementsByClassName(u),0!==(d=Array.from(p).filter((function(e){return e.innerText.includes("Route Package Protection")}))).length){e.next=9;break}return e.abrupt("return");case 9:d.forEach((function(e){return e.style.display="none"})),f=document.getElementsByClassName(c),Array.from(f).forEach((function(e){var t=e.innerText.match(s);if(t){var o=parseFloat(t[0].replace(/[.,]/g,""))/100-r,i=t[0].match(l),a=(0,ge.B)(o%1!=0||i,navigator.language,o,n);a=a.match(s)[0],e.innerText=e.innerText.replace(t[0],a)}}));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),ne(e,"postUpdateCart",function(){var r=t(i().mark((function t(r,n,o,a){var u,c,s,l,p,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=11;break}for(u=a.items,c={items:[{id:n,quantity:1}]},null!=a&&a.attributes&&(c.attributes=a.attributes),s=u.length-1;s>=0;s--)"Route"!==u[s].vendor&&(l={id:u[s].id,quantity:u[s].quantity,properties:u[s].properties},u[s].selling_plan_allocation&&u[s].selling_plan_allocation.selling_plan&&u[s].selling_plan_allocation.selling_plan.id&&(l.selling_plan=u[s].selling_plan_allocation.selling_plan.id),c.items.push(l));return t.next=8,e.reorderCartwithRetry(c,e.props.reloadWithoutRefresh,e.props.reloadWithoutRefreshV2,e.props.reloadWithoutRefreshCartPage,3);case 8:return p=t.sent,se("route:cart_updated"),t.abrupt("return",p);case 11:if(!e.props.headlessWidget){t.next=16;break}Ke(e),Fe.updateShopifyCartHeadless(r,e.props).then((function(){se("route:cart_updated"),e.refreshCheckout(document.location,!0)})).catch((function(){ze(e)})),t.next=21;break;case 16:return t.next=18,Fe.updateShopifyCart(r,e.props);case 18:return d=t.sent,se("route:cart_updated"),t.abrupt("return",d);case 21:case"end":return t.stop()}}),t)})));return function(e,t,n,o){return r.apply(this,arguments)}}()),ne(e,"reorderCartwithRetry",(function(t,r,n,o,i){if(i>0)return e.reorderCart(t,r,n,o).then((function(e){return Promise.resolve(e)})).catch((function(){return e.reorderCartwithRetry(t,r,n,o,--i)}));location.reload()})),ne(e,"reorderCart",function(){var r=t(i().mark((function r(n,o,a,u){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,c){ue().post("".concat(vt,"/cart/clear.js")).then((function(){return ue().post("".concat(vt,"/cart/add.js"),n)})).then(function(){var n=t(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=5;break}return t.next=3,e.updateCartWithoutRefresh(o);case 3:t.next=8;break;case 5:if(!a){t.next=8;break}return t.next=8,$e(u,a);case 8:r(n);case 9:case"end":return t.stop()}}),t)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log("Error reordering cart: ",e),c(e)}))})));case 1:case"end":return r.stop()}}),r)})));return function(e,t,n,o){return r.apply(this,arguments)}}()),ne(e,"removeFromCart",function(){var r=t(i().mark((function t(r){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={updates:ne({},r,0)},t.prev=1,t.next=4,e.postUpdateCart(n);case 4:return t.next=6,e.onChangeRouteProductVisibility(!1);case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",console.error("ERROR removing from cart: ",t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()),ne(e,"updateRouteVariantInCart",function(){var r=t(i().mark((function t(r,n){var o,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={},a=!1,r.forEach((function(e){return e.id===n?(o.updates=ft(ft({},o.updates),{},ne({},e.id,1)),a=!0):o.updates=ft(ft({},o.updates),{},ne({},e.id,0))})),a?ye.storageActionItem((function(){return sessionStorage}),"setItem","addingToCart",!1):o.updates=ft(ft({},o.updates),{},ne({},n,1)),t.prev=4,t.next=7,e.postUpdateCart(o);case 7:return t.next=9,e.onChangeRouteProductVisibility(!0,r);case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(4),t.abrupt("return",console.error("ERROR updating route variant in cart: ",t.t0));case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,t){return r.apply(this,arguments)}}()),ne(e,"refreshCheckout",function(){var r=t(i().mark((function t(r,n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(le()){t.next=2;break}return t.abrupt("return");case 2:r=r&&r.href?r.href:r,ue().get(r).then((function(t){var r=document.createElement("div");r.innerHTML=t.data,n&&e.renderOrderSummary(r),e.updateShippingMethods(r),e.ensureRouteIsChecked(),se("route:checkout_reloaded")})).catch((function(t){ze(e),e.retryRefreshCheckout(r,n),console.error("retry refresh checkout",t)}));case 4:case"end":return t.stop()}}),t)})));return function(e,t){return r.apply(this,arguments)}}()),ne(e,"ensureRouteIsChecked",(function(){var t=setInterval((function(){var r=document.getElementsByClassName("product-table");if(r){var n=!(!r||!r[0].innerText.length)&&r[0].innerText.toLowerCase().includes("route shipping insurance"),o=e.state.routeIsChecked;if(n||o||clearInterval(t),n&&o){var i=document.getElementsByClassName("route-div")[0];if(i){var a=i.querySelector("[data-toggle]");a&&"false"===document.querySelector(".route-div [data-toggle]").dataset.toggle&&n&&(e.setState({routeIsChecked:!0}),i.querySelector("[data-toggle]").click(),clearInterval(t)),a&&"true"===document.querySelector(".route-div [data-toggle]").dataset.toggle&&n&&clearInterval(t)}}}}),1500)})),ne(e,"renderOrderSummary",(function(t){ze(e),e.props.reloadProductsAndPriceSeparatelyCheckout?(document.querySelector(".order-summary__section--product-list").innerHTML=t.querySelector(".order-summary__section--product-list").innerHTML,document.querySelector(".order-summary__section--total-lines").innerHTML=t.querySelector(".order-summary__section--total-lines").innerHTML):document.querySelector("#order-summary").innerHTML=t.querySelector("#order-summary").innerHTML})),ne(e,"renderShippingMethods",(function(e){document.querySelector(".section.section--shipping-method").innerHTML=e.querySelector(".section.section--shipping-method").innerHTML})),ne(e,"updateShippingMethods",(function(t){if(null!==document.querySelector(".section.section--shipping-method"))if(null!==t.querySelector("div.section--shipping-method > .section__content > fieldset.content-box > *")){var r=document.querySelector('[name="checkout[shipping_rate][id]"]:checked').id;e.renderShippingMethods(t),e.removeShippingMethodsCSSTransition(),e.shippingMethodDoubleClick(r),e.setState({retryShippingMethods:10})}else{var n=t.querySelector("div.section--shipping-method [data-shipping-methods]");if(null!==n){var o=n.getAttribute("data-poll-target");o&&e.retryRefreshCheckout(vt+o,!1)}}})),ne(e,"shippingMethodDoubleClick",(function(e){if(e){var t=document.querySelector("#".concat(e)),r=document.querySelectorAll('[name="checkout[shipping_rate][id]"]');(r[0]===t?r[r.length-1]:r[0]).click(),t.click()}})),ne(e,"watchForChanges",(function(){var t,r,n=e.props.elementToListen,o=document.querySelectorAll(n),i={attributes:!0,childList:!0,subtree:!0},a=new MutationObserver((function(n){var o,i=lt(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;ye.storageActionItem((function(){return sessionStorage}),"setItem","mutatationTargetOuterText",a.target.outerText),t=ye.storageActionItem((function(){return sessionStorage}),"getItem","mutatationTargetOuterText"),"childList"===a.type&&t!==r&&(r=ye.storageActionItem((function(){return sessionStorage}),"getItem","mutatationTargetOuterText"),e.reloadWidget())}}catch(e){i.e(e)}finally{i.f()}}));if(o.length>0){var u,c=lt(o);try{for(c.s();!(u=c.n()).done;){var s=u.value;a.observe(s,i)}}catch(e){c.e(e)}finally{c.f()}}})),ne(e,"adjustmentsForSlideOutCart",(function(){"/cart"!==window.location.pathname&&!le()&&e.props.slideoutChecker&&e.attachSlideoutCartChecker()})),ne(e,"attachSlideoutCartChecker",(function(){var r=e,n=window.$;if(void 0!==n&&"function"==typeof n){var o=n(document).ajaxSuccess;void 0!==o&&"function"==typeof o&&n(document).ajaxSuccess(function(){var e=t(i().mark((function e(t,n,o){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.url.match(/cart.(change)/g)&&!o.url.match(/cart.(update)/g)){e.next=3;break}return e.next=3,r.initiateFixCartSafe();case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())}for(var a=document.evaluate(".//input | .//button | .//a",document.body,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),u=0;u<a.snapshotLength;u++){var c=a.snapshotItem(u);if(void 0!==c.value&&c.value.match(/check\s*out/gim)||void 0!==c.innerHTML&&c.innerHTML.match(/checkout/gim)||void 0!==c.name&&c.name.match(/check\s*out/gim)){var s=void 0;Element.prototype.closest&&(s=c.closest("form")),s?s.onsubmit=e.formCheckCartForAbnormalities:c.onclick=e.buttonCheckCartForAbnormalities}}})),ne(e,"permalinkButtonsCheck",(function(t,r){var n=function(e,t){var r,n="".concat(e,":1"),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n+=",".concat(i.id,":").concat(i.quantity)}}catch(e){o.e(e)}finally{o.f()}return n}(t,r);document.querySelectorAll(e.props.permalinkButtonSelector).forEach((function(e){var t=e.href.replace(/\/cart\/.*$/gi,"/cart/")+n;e.href=t}))})),ne(e,"formCheckCartForAbnormalities",function(){var r=t(i().mark((function r(n){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.props.checkoutCartFixed||n.preventDefault(),e.props.fixingCheckoutCart||(e.props.fixingCheckoutCart=!0,e.setState({cartFixEvent:n},t(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initiateFixCart();case 2:e.props.slideoutCheckerForceRedirect&&(window.location.href=e.props.slideoutCheckerForceRedirect);case 3:case"end":return t.stop()}}),t)})))));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),ne(e,"buttonCheckCartForAbnormalities",function(){var r=t(i().mark((function t(r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==e.props.fixingCheckoutCart){t.next=8;break}return r.preventDefault(),r.stopImmediatePropagation(),t.next=5,e.initiateFixCart();case 5:return e.props.fixingCheckoutCart=!0,t.next=8,r.target.click();case 8:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}()),ne(e,"initiateFixCart",t(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.setState({fixingCart:!0},t(i().mark((function t(){var r,n,o,a,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getShopifyCart();case 2:if(r=t.sent,n=r.data,o=e.getCurrency(null==n?void 0:n.currency),0!=(a=Fe.getCartSubtotal(n,e.props.itemToExclude)/100)){t.next=11;break}return e.setState({fixingCart:!1}),t.next=10,e.removeAllRouteItemsFromCart();case 10:return t.abrupt("return");case 11:return t.next=13,Ve(e.props.forceOptIn,e.props.forceOptOut,e.props.defaultChecked);case 13:return u=t.sent,t.next=16,Xe(n,u);case 16:if(!(u=t.sent)&&null!==u){t.next=22;break}ve.config(a,o,u),e.createQuote(n),t.next=25;break;case 22:return e.setState({fixingCart:!1}),t.next=25,e.removeAllRouteItemsFromCart();case 25:case"end":return t.stop()}}),t)}))));case 1:case"end":return r.stop()}}),r)})))),ne(e,"initiateFixCartSafe",t(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.slideoutChecker||"unverified"!==e.props.cartStatus){t.next=3;break}return t.next=3,e.initiateFixCart();case 3:case"end":return t.stop()}}),t)})))),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(r,e),ee(r,[{key:"componentDidMount",value:(n=t(i().mark((function e(){var r,n,o,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(" * * * Widget Did Mounting * * * "),e.prev=1,r=xe(),e.next=5,Ae(r);case 5:return n=e.sent,this.setState({merchantId:n.merchantId,storeName:n.storeName,storeDomain:r}),e.next=9,ve.init(this.onToggle,this.onGetQuote,this.onCreateQuote,this.onLoad,r,"production",n.merchantId,n.storeName,this.props.darkUI,this.props.desktopAlign);case 9:if(this.props.headlessWidget){e.next=12;break}return e.next=12,Ye(this.props);case 12:return e.next=14,this.setEnvironment();case 14:this.setGlobalVariables(),o=this,Oe.on("http-cart-change",t(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("cart CHANGE on Widget"),e.next=3,o.reloadWidget();case 3:return e.next=5,o.initiateFixCartSafe();case 5:case"end":return e.stop()}}),e)})))),Oe.on("http-cart-update",function(){var e=t(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u("cart UPDATED on Widget"),e.t0=t,!e.t0){e.next=6;break}return e.next=5,a.isRouteVariantUpdate(t);case 5:e.t0=!e.sent;case 6:if(!e.t0){e.next=9;break}return e.next=9,o.reloadWidget();case 9:return e.next=11,o.initiateFixCartSafe();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Oe.on("http-cart-add",function(){var e=t(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u("cart ADD on Widget"),e.t0=t,!e.t0){e.next=6;break}return e.next=5,a.isRouteVariantUpdate(t);case 5:e.t0=!e.sent;case 6:if(!e.t0){e.next=9;break}return e.next=9,o.reloadWidget();case 9:return e.next=11,o.initiateFixCartSafe();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.adjustmentsForSlideOutCart(),Oe.intercept(),this.props.disableAnalytics&&(window.Routeapp.analytics.settings.disableGA=!0),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(1),s.captureExceptionWithBreadcrumb(e.t0,{message:"error during componentDidMount Shopify Widget",level:"error"}),window.Routeapp.analytics.send({action:"error_mounting_shopify_widget",event_category:"route-widget",event_label:"widget",value:JSON.stringify(e.t0)});case 28:case"end":return e.stop()}}),e,this,[[1,24]])}))),function(){return n.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){console.log("Route Widget v1.2 - Unmounted")}},{key:"componentDidCatch",value:function(e){this.setState({errored:!0}),u(e),window.Routeapp.analytics.send({action:"error_render_shopify_widget",event_category:"route-widget",event_label:"widget",value:e})}},{key:"removeShippingMethodsCSSTransition",value:function(){document.querySelectorAll('[name="checkout[shipping_rate][id]"]').forEach((function(e){e.style.transition="none"}))}},{key:"retryRefreshCheckout",value:function(e,t){var r=this;this.state.retryShippingMethods>0?setTimeout((function(){r.setState({retryShippingMethods:r.state.retryShippingMethods-1}),r.refreshCheckout(e,t)}),500):ze(this)}},{key:"render",value:function(){return R("div",{className:"route-empty"})}}]);var n}(I);ne(gt,"propTypes",{darkUI:ie().bool.isRequired,altUI:ie().bool.isRequired,desktopAlign:ie().string.isRequired,mobileAlign:ie().string.isRequired,classNameRemove:ie().string.isRequired,needsUpdate:ie().bool.isRequired,defaultChecked:ie().bool.isRequired,forceCheckbox:ie().bool.isRequired,refreshClickAdd:ie().bool.isRequired,reorderRefresh:ie().bool.isRequired,disableReorder:ie().bool.isRequired,interceptorsDelay:ie().bool.isRequired,slideoutChecker:ie().bool,slideoutCheckerForceRedirect:ie().string,fixingCheckoutCart:ie().bool,checkoutCartFixed:ie().bool,cartStatus:ie().string,reloadWithoutRefresh:ie().string,reloadWithoutRefreshV2:ie().string,reloadWithoutRefreshCartPage:ie().string,nameToListen:ie().string.isRequired,forceOptIn:ie().bool,forceOptOut:ie().bool,elementToListen:ie().string,disableAnalytics:ie().bool,defaultMaxUsdSubtotalAllowed:ie().number,defaultMinUsdSubtotalAllowed:ie().number,ignoreSubtotal:ie().bool,multipleWidgets:ie().bool,headlessWidget:ie().bool,reloadProductsAndPriceSeparatelyCheckout:ie().bool,hideRouteProductFromCart:ie().string,itemToExclude:ie().string}),ne(gt,"defaultProps",{needsUpdate:!1,darkUI:!1,altUI:!1,defaultChecked:!1,refreshClickAdd:!1,reorderRefresh:!1,disableReorder:!1,forceCheckbox:!1,interceptorsDelay:!1,disableAnalytics:!1,defaultMaxUsdSubtotalAllowed:5e3,defaultMinUsdSubtotalAllowed:0,ignoreSubtotal:!1,cartStatus:"unverified",itemToExclude:""});var yt,bt,wt,_t=[{type:"watch-add",attributes:"nameToListen"},{type:"opt-in",attributes:"forceOptIn"},{type:"opt-out",attributes:"forceOptOut"},{type:"watch-changes",attributes:"elementToListen"},{type:"needs-update",attributes:"needsUpdate",isBool:!0},{type:"default-checked",attributes:"defaultChecked",isBool:!0},{type:"refreshClickAdd",attributes:"refreshClickAdd",isBool:!0},{type:"reorder-refresh",attributes:"reorderRefresh",isBool:!0},{type:"disable-reorder",attributes:"disableReorder",isBool:!0},{type:"interceptors-delay",attributes:"interceptorsDelay",isBool:!0},{type:"multiple-widgets",attributes:"multipleWidgets",isBool:!0},{type:"reload-without-refresh",attributes:"reloadWithoutRefresh"},{type:"reload-without-refresh-v2",attributes:"reloadWithoutRefreshV2"},{type:"reload-without-refresh-cart-page",attributes:"reloadWithoutRefreshCartPage"},{type:"slideout-checker",attributes:"slideoutChecker",isBool:!0},{type:"slideout-checker-force-redirect",attributes:"slideoutCheckerForceRedirect"},{type:"force-checkbox",attributes:"forceCheckbox",isBool:!0},{type:"disable-analytics",attributes:"disableAnalytics"},{type:"class-name-remove",attributes:"classNameRemove",isGetFromValue:!0},{type:"mobile-align",attributes:"mobileAlign"},{type:"desktop-align",attributes:"desktopAlign"},{type:"dark-ui",attributes:"darkUI",isBool:!0},{type:"ignore-subtotal",attributes:"ignoreSubtotal",isBool:!0},{type:"headless-widget",attributes:"headlessWidget",isBool:!0},{type:"reload-products-and-price-separately-checkout",attributes:"reloadProductsAndPriceSeparatelyCheckout",isBool:!0},{type:"hide-route-product-from-cart",attributes:"hideRouteProductFromCart"},{type:"permalink-button-check",attributes:"permalinkButtonSelector"},{type:"exclude-product",attributes:"itemToExclude"}],xt=function(e){var t={},r=function(t){return e.hasAttribute(t)||e.classList.contains(t)};return _t.map((function(n){var o,i;n.hasOwnProperty("isBool")?(o=n.type,i=n.attributes,r(o)&&(t[i]=!0)):n.hasOwnProperty("isGetFromValue")?function(n,o){r(n)&&(t[o]=function(t){return e.attributes[t].value}(n))}(n.type,n.attributes):function(n,o){r(n)&&(t[o]=function(t){return e.getAttribute(t)}(n))}(n.type,n.attributes)})),t},kt=function(){var e=t(i().mark((function e(){var t,r,n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,void 0,i=(new Date).getTime(),ue().get("".concat(document.location.origin,"/cart.js?timestamp=").concat(i));case 2:if(t=e.sent,r=t.data.items,n=!1,o={updates:{}},r)for(a=0;a<r.length;a++)"Route"===r[a].vendor&&(o.updates[r[a].variant_id]=0,n=!0);n&&ue().post("".concat(document.location.origin,"/cart/update.js"),o).then((function(e){window.location.reload()})).catch((function(e){return console.log("Error removing Route",e)}));case 8:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}(),St=(r(370),xe());function Ct(){document.getElementById("route-script")&&document.getElementById("route-script").hasAttribute("headless-widget")&&pe()&&Fe.updateOrderSummaryPaymentPage({headlessWidget:!0});var e,r=!0;function n(e){var t=document.querySelector(".route-holder");if(!t){var r=document.createElement("div");r.setAttribute("class","route-holder"),e.parentNode.insertBefore(r,e),t=r}return t}function o(){Oe.on("http-cart-update",(function(){r=!0})),Oe.on("http-cart-change",(function(){r=!0})),Oe.on("http-cart-add",(function(){r=!0})),Oe.intercept()}window.renderRouteWidget=function(){var e=t(i().mark((function e(t){var o,a,u,c,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=27;break}o=0;case 2:if(!(o<t.length)){e.next=27;break}if(a={},t[o]){e.next=6;break}return e.abrupt("continue",24);case 6:if(a=xt(t[o]),t[o].hasAttribute("route-storefront-token")&&ye.storageActionItem((function(){return sessionStorage}),"setItem","route-storefront-token",t[o].getAttribute("route-storefront-token")),window.route_config&&(window.route_config.alternate_ui&&(a.altUI=!0),window.route_config.disableGA&&(a.disableAnalytics=!0),window.route_config.disableReorder&&(a.disableReorder=!0)),le()&&(a.disableReorder=!0),le()||window.location.href.includes("orders/")||window.location.href.includes("checkouts")&&window.location.href.includes("thank_you")){e.next=21;break}return e.next=13,Fe.getShopifyCart(a);case 13:if(200!==(u=e.sent).status){e.next=21;break}if(c=u.data,s=c.items,0!==je(s,a.itemToExclude).length){e.next=21;break}return r=!1,kt(),e.abrupt("return");case 21:r=!0,l=n(t[o]),X(R(gt,a),l);case 24:o++,e.next=2;break;case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.route_config&&window.route_config.disableGA&&window.Routeapp.analytics&&(window.Routeapp.analytics.settings.disableGA=!0),(e=document.querySelector(".route-div"))&&e.hasAttribute("interceptors-delay")?setTimeout(o,100):o();var a=!0;function c(){var e,t=document.querySelectorAll(".section--shipping-method").length,n=document.querySelectorAll(".route-div").length,o=document.querySelectorAll("[data-protection-widget]").length,i="no_coverage"===ye.storageActionItem((function(){return sessionStorage}),"getItem","payment-responsible");if(e=document.querySelector('[data-step="shipping_method"]'),le()&&(e||window.location.href.includes("step=shipping_method"))&&t>0&&0===n){var s=document.createElement("div");s.className="section";var d=document.createElement("div"),f=document.getElementById("route-script");if(f)for(var h=0;h<f.attributes.length;h++){var m=f.attributes[h];"id"!==m.nodeName&&"type"!==m.nodeName&&d.setAttribute(m.nodeName,m.nodeValue?m.nodeValue:"")}d.className="route-div",s.appendChild(d),document.querySelectorAll(".step__sections")[0].appendChild(s)}u("Should render widget?",n>o,r,a,!i),n>o&&r&&a&&!i&&(window.renderRouteWidget(document.querySelectorAll(".route-div")),a=!1,setTimeout((function(){a=!0}),3e3),100===l&&(l=1e3,clearInterval(p),p=setInterval(c,l)))}!function(){var e=document.querySelector(".route-div");if(e&&e.hasAttribute("button-add")){var t=e.getAttribute("button-add");document.querySelectorAll(t).forEach((function(e){e.addEventListener("click",(function(){r=!0}))}))}}();var l=100,p=function(){try{return"no_coverage"===ye.storageActionItem((function(){return sessionStorage}),"getItem","payment-responsible")&&ye.storageActionItem((function(){return sessionStorage}),"removeItem","payment-responsible"),c(),setInterval(c,l)}catch(e){s.captureExceptionWithBreadcrumb(e,{message:"error during checkAndSetInterval",level:"error"})}}();ve.fetchProtectCoreScript("".concat(ce.protectCoreURL,"?shop=").concat(St))}null===(yt=window)||void 0===yt||null===(bt=yt.Routeapp)||void 0===bt||null===(wt=bt.analytics)||void 0===wt||wt.send({action:"track_performance",event_category:"route-widget",event_label:"widget-adapter-init",value:Math.round(window.performance.now())}),function(){try{"loading"!==document.readyState?Ct():document.addEventListener("DOMContentLoaded",(function(){Ct()}))}catch(e){s.captureExceptionWithBreadcrumb(e,{message:"fetch Protect Core right at the start",level:"error"})}}();var Rt=xe();function At(){return(At=t(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(le()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Fe.getShopifyCart({ignoreCachedCart:!0});case 4:if(t=e.sent,1!==(r=t.data).items.length||"Route"!==r.items[0].vendor){e.next=12;break}return(n={updates:{}}).updates[r.items[0].key]=0,e.next=11,Fe.updateShopifyCart(n);case 11:location.reload();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}st(),Ae(Rt),function(){At.apply(this,arguments)}()})(),n})()));
//# sourceMappingURL=route-widget-shopify-stable-v2.min.js.map